<!DOCTYPE html>
<html lang='en'>
<head>
  <!-- Bootstrap CSS -->
  <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css' integrity='sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS' crossorigin='anonymous'>
  <title>URL - TinyApp Example</title>
</head>
<body>
    <% include ./partials/_header %>
    <div class='card text-center'>
      <div class='card-header'></div>
        <div class='card-body'>
          <h5 class='card-title'>TinyURL for: <%= longURL %></h5>
          <p class='card-text'>Short URL: <a href='/u/<%= shortURL %>'><%= shortURL %></a></p>
          <!-- <br> -->
          <h5 class='card-title'>Edit</h5>
          <p class='card-text'>
            <form method='POST' action='/urls/<%= shortURL %>?_method=PUT'>New URL: <input name='newURL' placeholder='http://'>
              <button type='submit' class='btn btn-primary'>Update</button>
            </form>
          </p>
          <br>
          <table class='table'>
            <thead>
              <tr>
                <th scope='col'>Created on:</th>
                <th scope='col'># of total visits</th>
                <th scope='col'># of unique visits</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><%= analytics.created %></td>
                <td><%= analytics.numVisitor %></td>
                <td><%= analytics.numUniqueVisitor %></td>
              </tr>
            </tbody>
          </table>
        </div>
        <br>
        <div class='card-body'>
          <h5 class='card-title'>Visitor log</h5>
          <table class='table'>
            <thead>
              <tr>
                <th scope='col'>ID</th>
                <th scope='col'>Timestamp</th>
              </tr>
            </thead>
            <tbody>
            <% visitors.forEach(visitor => { %>
              <tr>
                <td><%= visitor.id %></td>
                <td><%= visitor.timestamp %></td>
              </tr>
            <% }) %>
            </tbody>
          </table>
        </div>
    <div class='card-footer text-muted'></div>
  <!-- Bootstrap JS -->
  <script src='https://code.jquery.com/jquery-3.3.1.slim.min.js' integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo' crossorigin='anonymous'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js' integrity='sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1' crossorigin='anonymous'></script>
  <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js' integrity='sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM' crossorigin='anonymous'></script>
</body>
</html>